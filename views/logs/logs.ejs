<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Quแบฃn lรฝ Logs</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <header style="text-align: right;">
  <form action="/logout" method="POST">
    <button type="submit">๐ช ฤฤng xuแบฅt</button>
  </form>
</header>

  <div class="container">
  <h1>Chรo <%= user.username %> (Admin)</h1>

  <!-- Nรบt quแบฃn lรฝ tรi khoแบฃn -->
  <a href="/admin/users">
    <button style="margin-bottom: 20px;"><i>๐ฅ</i> Quแบฃn lรฝ tรi khoแบฃn</button>
  </a>

  <!-- Form tรฌm kiแบฟm -->
  <form action="/admin/dashboard" method="get">
    <input 
      type="text" 
      name="keyword" 
      placeholder="Tรฌm kiแบฟm username, IP, hostname" 
      value="<%= keyword %>"
    />
    <button type="submit"><i>๐</i> Tรฌm kiแบฟm</button>
  </form>

    <!-- Form clear logs -->
    <form action="/admin/clear-logs" method="post">
      <button type="submit" onclick="return confirm('Bแบกn cรณ chแบฏc muแปn xรณa tแบฅt cแบฃ logs?')">
        <i>๐๏ธ</i> Xรณa tแบฅt cแบฃ logs
      </button>
    </form>

    <!-- Bแบฃng logs -->
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Username</th>
          <th>IP</th>
          <th>Hostname</th>
          <th>Timestamp</th>
          <th>Hรnh ฤแปng</th>
        </tr>
      </thead>
      <tbody>
        <% if (logs.length === 0) { %>
          <tr><td colspan="6" style="text-align:center;">Khรดng cรณ logs nรo.</td></tr>
        <% } else { %>
          <% logs.forEach(log => { %>
            <tr>
              <td><%= log.id %></td>
              <td><%= log.username %></td>
              <td><%= log.ip %></td>
              <td><%= log.hostname %></td>
              <td><%= new Date(log.timestamp).toLocaleString('vi-VN', { timeZone: 'Asia/Ho_Chi_Minh' }) %></td>
              <td>
                <form action="/admin/delete-log" method="post" onsubmit="return confirm('Bแบกn cรณ chแบฏc muแปn xรณa log nรy?')">
                  <input type="hidden" name="id" value="<%= log.id %>" />
                  <button type="submit"><i>โ</i> Xรณa</button>
                </form>
              </td>
            </tr>
          <% }); %>
        <% } %>
      </tbody>
    </table>

    <!-- Form block IP hoแบทc hostname -->
    <h2>Chแบทn IP hoแบทc Hostname</h2>
    <form action="/admin/block" method="post">
      <label>
        Loแบกi:
        <select name="type" required>
          <option value="ip">IP</option>
          <option value="hostname">Hostname</option>
        </select>
      </label>
      <label>
        Giรก trแป:
        <input type="text" name="value" required placeholder="Nhแบญp IP hoแบทc hostname" />
      </label>
      <button type="submit"><i>๐ซ</i> Chแบทn</button>
    </form>
  </div>
</body>
</html>
